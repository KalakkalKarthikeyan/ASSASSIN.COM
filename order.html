<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Order Summary</h1>
        <div id="assassin-details"></div>
        <button onclick="window.location.href='index.html'">Go Back</button>
        <button id="pay-now">Pay Now And Book Your Assassin</button>

        <div id="payment-form" style="display:none;">
            <h2>Payment Details</h2>
            <input type="text" id="user-name" placeholder="Your Name">
            <input type="number" id="user-age" placeholder="Your Age">
            <input type="date" id="assassin-date">
            <input type="text" id="card-number" placeholder="Card Number">
            <button id="confirm-payment">Confirm Payment</button>
            <p id="payment-message" style="color:red;"></p>
        </div>

        <h2>Live Order Tracking</h2>
        <p id="tracking-status">Waiting for assassin...</p>

        <h2>Live Chat with Assassin</h2>
        <div id="chat-box"></div>
        <input type="text" id="user-response" placeholder="Type your response...">
        <button id="send-response">Send</button>
    </div>

    <script>
        // Load Assassin Details
        const assassin = JSON.parse(localStorage.getItem("selectedAssassin"));
        document.getElementById("assassin-details").innerHTML = `
            <img src="${assassin.image}" alt="${assassin.name}" style="width:200px; border-radius:10px;">
            <h2>${assassin.name}</h2>
            <p><strong>Skills:</strong> ${assassin.description}</p>
            <p><strong>Price:</strong> ${assassin.price}</p>
        `;

        // Payment Form Logic
        document.getElementById("pay-now").addEventListener("click", () => {
            document.getElementById("payment-form").style.display = "block";
        });

        document.getElementById("confirm-payment").addEventListener("click", () => {
            const age = document.getElementById("user-age").value;
            const card = document.getElementById("card-number").value;
            const message = document.getElementById("payment-message");

            if (age < 18) {
                message.textContent = "You're too young to hire an assassin! Go do your homework.";
            } else if (card.length !== 16) {
                message.textContent = "Invalid card number! Assassins donâ€™t take fake cards.";
            } else {
                alert("Order Successful! Your assassin is on the way.");
                document.getElementById("payment-form").style.display = "none";
            }
        });

        // Live Order Tracking (Updates every 5 sec, not looping infinitely)
        const locations = [
            "Buying a coffee at Starbucks...",
            "Taking a nap under a tree...",
            "Hiding in a bush near the target's location...",
            "Stuck in traffic, blaming GPS...",
            "Sharpening their knife at a local hardware store...",
            "Disguised as a pizza delivery guy...",
            "Hacking the target's WiFi for fun..."
        ];

        let trackingIndex = 0;
        function updateTracking() {
            if (trackingIndex < locations.length) {
                document.getElementById("tracking-status").textContent = locations[trackingIndex];
                trackingIndex++;
                setTimeout(updateTracking, 5000);
            } else {
                document.getElementById("tracking-status").textContent = "The assassin has arrived!";
            }
        }
        setTimeout(updateTracking, 5000);

        // Live Chat with Assassin
        const chatQuestions = [
            "Do you want a silent takedown or an explosive entrance?",
            "Should I wear a mask or go in as a pizza delivery guy?",
            "Should I send a warning before eliminating the target?",
            "Do you want the job done today or wait for a discount day?",
            "Should I bring my pet cat as emotional support?"
        ];

        let questionIndex = 0;
        function askQuestion() {
            if (questionIndex < chatQuestions.length) {
                document.getElementById("chat-box").textContent = chatQuestions[questionIndex];
            }
        }

        document.getElementById("send-response").addEventListener("click", () => {
            const response = document.getElementById("user-response").value;
            if (response.trim() !== "") {
                questionIndex++;
                askQuestion();
                document.getElementById("user-response").value = "";
            }
        });

        askQuestion();
    </script>
</body>
</html>
