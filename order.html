<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Order Summary</h1>
        <div id="assassin-details"></div>
        <button onclick="window.location.href='index.html'">Go Back</button>
        <button id="pay-now">Pay Now And Book Your Assassin</button>

        <!-- Payment Form (Hidden Initially) -->
        <div id="payment-form" style="display: none;">
            <h2>Enter Payment Details</h2>
            <label>Name:</label>
            <input type="text" id="user-name" placeholder="Your Name">
            <label>Age:</label>
            <input type="number" id="user-age" placeholder="Your Age">
            <label>Date:</label>
            <input type="date" id="order-date">
            <label>Card Info:</label>
            <input type="text" id="card-info" placeholder="Card Number">
            <button id="confirm-payment">Confirm Payment</button>
        </div>

        <!-- Order Tracking -->
        <h2>Live Order Tracking</h2>
        <p id="order-tracking">Assassin is preparing...</p>

        <!-- Live Chat with Assassin -->
        <h2>Live Chat with Assassin</h2>
        <div id="chat-box">
            <p id="assassin-message">Waiting for the assassin to message...</p>
            <input type="text" id="user-response" placeholder="Type your answer...">
            <button id="send-response">Send</button>
        </div>

        <!-- Fake Customer Reviews -->
        <h2>Customer Reviews</h2>
        <div id="reviews">
            <p><strong>John Doe:</strong> "Excellent service! My problem was *permanently* solved."</p>
            <p><strong>Jane Smith:</strong> "Fast and efficient. Worth every dollar!"</p>
            <p><strong>Michael Brown:</strong> "Highly professional. 10/10 would order again!"</p>
        </div>
    </div>

    <script>
        // Load selected assassin
        const assassin = JSON.parse(localStorage.getItem("selectedAssassin"));
        document.getElementById("assassin-details").innerHTML = `
            <img src="${assassin.image}" alt="${assassin.name}" style="width:200px; border-radius:10px;">
            <h2>${assassin.name}</h2>
            <p><strong>Skills:</strong> ${assassin.description}</p>
            <p><strong>Price:</strong> ${assassin.price}</p>
        `;

        // Payment Handling
        document.getElementById("pay-now").addEventListener("click", () => {
            document.getElementById("payment-form").style.display = "block";
        });

        document.getElementById("confirm-payment").addEventListener("click", () => {
            alert("Order Successful! Your assassin will be dispatched soon.");
            window.location.href = "index.html"; // Redirect to home after order
        });

        // Live Order Tracking
        const locations = [
            "Assassin is currently at Starbucks drinking coffee.",
            "Assassin is sharpening their weapons.",
            "Assassin is on a motorcycle speeding towards the target.",
            "Assassin is stuck in traffic, but don’t worry, they’ll make it.",
            "Assassin is outside the target’s house, waiting for the signal.",
            "Assassin is double-checking the hit list for accuracy."
        ];

        let locationIndex = 0;
        function updateTracking() {
            if (locationIndex < locations.length) {
                document.getElementById("order-tracking").innerText = locations[locationIndex];
                locationIndex++;
            }
        }
        setInterval(updateTracking, 5000); // Update every 5 seconds

        // Live Chat with Assassin
        const questions = [
            "Do you want a silent takedown or an explosive entrance?",
            "Should I wear a mask or go in as a pizza delivery guy?",
            "Would you like a stealth approach or a public warning?",
            "Should I leave a calling card or make it look like an accident?",
            "Would you prefer quick and clean, or slow and painful?"
        ];

        let askedQuestions = new Set();
        function askQuestion() {
            if (askedQuestions.size < questions.length) {
                let question;
                do {
                    question = questions[Math.floor(Math.random() * questions.length)];
                } while (askedQuestions.has(question));

                askedQuestions.add(question);
                document.getElementById("assassin-message").innerText = question;
            } else {
                document.getElementById("assassin-message").innerText = "No more questions. Assassin is on the way!";
            }
        }

        document.getElementById("send-response").addEventListener("click", () => {
            const response = document.getElementById("user-response").value.trim();
            if (response) {
                askQuestion();
                document.getElementById("user-response").value = "";
            }
        });

        // Start first question
        askQuestion();
    </script>
</body>
</html>
