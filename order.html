<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <link rel="stylesheet" href="styles.css">
    <script>
        function validateAndPay() {
            let name = document.getElementById("name").value;
            let age = document.getElementById("age").value;
            let date = document.getElementById("date").value;
            let card = document.getElementById("card").value;

            if (!name || !age || !date || !card) {
                alert("All fields are required! Don't try to skip!");
                return;
            }

            if (age < 18) {
                alert("You're too young to hire an assassin! Watch cartoons instead.");
                return;
            }

            alert("Order Successful! Your assassin is on the way.");
            document.getElementById("tracking-section").style.display = "block";
            document.getElementById("chat-section").style.display = "block";
            startFakeTracking();
            startFakeChat();
        }

        function startFakeTracking() {
            let locations = [
                "at Starbucks drinking coffee ‚òï",
                "stuck in traffic near McDonald's üçî",
                "sharpening his plastic knife üî™",
                "disguised as a delivery guy üö¥‚Äç‚ôÇÔ∏è",
                "hiding in a bush waiting for the right moment üå≥",
                "stalking the target from a rooftop üè¢",
                "at the gym getting stronger for the mission üí™",
                "practicing ninja moves in a parking lot ü•∑",
                "checking Google Maps because he got lost üó∫Ô∏è",
                "asking Siri for assassination tips üì±",
                "watching YouTube tutorials on ‚ÄòHow to be a better assassin‚Äô üé•",
                "getting distracted by a cat on the street üêà"
            ];
            
            if (locations.length > 0) {
                let randomIndex = Math.floor(Math.random() * locations.length);
                document.getElementById("tracking-info").innerText = "Assassin is " + locations[randomIndex];
                locations.splice(randomIndex, 1); // Remove the location so it doesn‚Äôt repeat
            } else {
                document.getElementById("tracking-info").innerText = "Assassin has reached the destination! üéØ";
            }
        }

        function startFakeChat() {
            let chatBox = document.getElementById("chat-box");
            let chatInput = document.getElementById("chat-input");
            let chatButton = document.getElementById("chat-submit");
            let responses = [
                "Do you want a silent takedown or an explosive entrance?",
                "Should I wear a mask or go in as a pizza delivery guy?",
                "Should I leave a calling card like in the movies? üòé",
                "Any last words for your target? üòÇ",
                "Should I use a laser pointer to distract the target first? üî¥",
                "Do you prefer a sneak attack or a dramatic entrance? üé≠"
            ];

            function askNewQuestion() {
                if (responses.length === 0) {
                    chatBox.innerHTML += `<p>üí¨ Assassin: No more questions, I'm getting ready! üòé</p>`;
                    chatInput.style.display = "none";
                    chatButton.style.display = "none";
                    return;
                }
                
                let randomIndex = Math.floor(Math.random() * responses.length);
                let question = responses[randomIndex];
                responses.splice(randomIndex, 1); // Remove the question so it doesn‚Äôt repeat

                chatBox.innerHTML += `<p>üí¨ Assassin: ${question}</p>`;
                chatInput.disabled = false;
                chatInput.focus();
            }

            chatButton.addEventListener("click", function() {
                let userResponse = chatInput.value.trim();
                if (userResponse) {
                    chatBox.innerHTML += `<p>üó®Ô∏è You: ${userResponse}</p>`;
                    chatInput.value = "";
                    chatInput.disabled = true;
                    setTimeout(askNewQuestion, 2000);
                } else {
                    alert("Answer the question first before getting another one!");
                }
            });

            askNewQuestion();
        }
    </script>
</head>
<body>
    <div class="container">
        <h1>Order Summary</h1>
        <div id="assassin-details"></div>
        <button onclick="window.location.href='index.html'">Go Back</button>

        <h2>Payment Details</h2>
        <label>Name: <input type="text" id="name"></label><br>
        <label>Age: <input type="number" id="age"></label><br>
        <label>Date of Execution: <input type="date" id="date"></label><br>
        <label>Card Info: <input type="text" id="card"></label><br>
        <button onclick="validateAndPay()">Pay Now And Book Your Assassin</button>

        <div id="tracking-section" style="display:none;">
            <h2>Live Order Tracking</h2>
            <p id="tracking-info">Waiting for update...</p>
        </div>

        <div id="chat-section" style="display:none;">
            <h2>Live Chat with Assassin</h2>
            <div id="chat-box"></div>
            <input type="text" id="chat-input" placeholder="Type your response...">
            <button id="chat-submit">Send</button>
        </div>
    </div>

    <script>
        const assassin = JSON.parse(localStorage.getItem("selectedAssassin"));
        document.getElementById("assassin-details").innerHTML = `
            <img src="${assassin.image}" alt="${assassin.name}" style="width:200px; border-radius:10px;">
            <h2>${assassin.name}</h2>
            <p><strong>Skills:</strong> ${assassin.description}</p>
            <p><strong>Price:</strong> ${assassin.price}</p>
        `;
    </script>
</body>
</html>
